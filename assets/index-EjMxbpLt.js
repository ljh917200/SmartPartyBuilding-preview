import{h as J,r as c,G as L,c as D,f as t,a as o,w as u,p as C,S as R,b as _,s as O,M as F,k as j,B as m,o as y,g,t as n,U as H,j as z,z as V,_ as K}from"./index-G-qDTFo-.js";const W={class:"container"},X={class:"table-container"},Y={class:"action-bar"},Z={class:"table-wrapper"},ee={class:"pagination"},te={class:"detail-grid"},ae={class:"detail-item"},se={class:"detail-value"},ne={class:"detail-item"},le={class:"detail-value"},ie={class:"detail-item"},oe={class:"detail-value"},re={class:"detail-item"},de={class:"detail-value"},ue={class:"detail-item"},ce={class:"detail-value"},pe={class:"detail-item"},me={class:"detail-value"},ve={class:"detail-item"},_e={class:"detail-value score"},ge={class:"detail-item"},we={class:"detail-value"},be={class:"detail-section"},fe={class:"answer-item"},ye={class:"answer-content"},he={class:"answer-item"},Ae={class:"answer-content"},Se={class:"answer-item"},Pe={class:"answer-content"},xe={class:"answer-item"},Ce={class:"answer-content"},Ne={key:0,class:"detail-section"},ke={class:"notes-content"},Be={class:"detail-section"},Qe=J({__name:"index",setup(Ee){const N=c([]),h=c(0),A=c(!1),S=c(1),P=c(10),v=c([]),x=c(!1),l=c(null),w=async()=>{A.value=!0;try{const a={code:1,msg:"success",data:{total:17,records:[{id:"PAPER_001",number:"PAPER-2023001",examinationName:"入党积极分子考试",userName:"张三",isSubmit:0,questionQuantity:9,answeredAlreadyQuantity:9,score:11,updateTime:"2025-09-19 11:13:59"},{id:"PAPER_002",number:"PAPER-2023002",examinationName:"入党积极分子考试",userName:"李四",isSubmit:1,questionQuantity:9,answeredAlreadyQuantity:9,score:11,updateTime:"2025-09-12 10:21:58"},{id:"PAPER_003",number:"PAPER-2023003",examinationName:"入党积极分子考试",userName:"赵六",isSubmit:0,questionQuantity:9,answeredAlreadyQuantity:9,score:11,updateTime:"2025-09-12 10:21:58"},{id:"PAPER_004",number:"PAPER-2023004",examinationName:"入党积极分子考试",userName:"孙七",isSubmit:1,questionQuantity:9,answeredAlreadyQuantity:9,score:100,updateTime:"2025-05-25 17:37:07"},{id:"PAPER_005",number:"PAPER-2023005",examinationName:"入党积极分子考试",userName:"周八",isSubmit:1,questionQuantity:9,answeredAlreadyQuantity:9,score:100,updateTime:"2025-05-25 17:37:07"}]}};N.value=a.data.records,h.value=a.data.total}catch{m.error("获取考卷列表失败")}finally{A.value=!1}},q=async a=>{try{const e={code:1,msg:"success",data:{number:"PAPER-2023001",examinationInformationName:"入党积极分子考试",userName:"张三",isSubmit:1,questionQuantity:9,answeredAlreadyQuantity:9,singleChoiceAnswers:"[1,2,3]",multipleChoiceAnswers:"[[1,2,3,4],[1,2,3,4,5],[1,3,4]]",judgeAnswers:"[1,2]",fillBlankAnswers:"[[为共产主义奋斗终身，随时准备为党和人民牺牲一切],[政治标准]]",score:11,notes:"答题完整，正确率100%",updateTime:"2025-09-19 11:13:59",updateName:"管理员"}};l.value=e.data,x.value=!0}catch{m.error("获取考卷详情失败")}},k=async a=>{Array.isArray(a)&&a.join(","),await V.confirm(`确定要删除选中的 ${Array.isArray(a)?a.length:1} 个考卷吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});try{m.success("删除成功"),await w(),v.value=[]}catch{m.error("删除失败")}},I=async(a,e)=>{try{await V.confirm(`确定要修改该考卷的状态为"${e==="1"?"已提交":"未提交"}"吗？`,"确认修改",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const r={code:1,msg:"sucess",data:null};m.success("状态修改成功"),await w()}catch(r){r instanceof Error||m.error("状态修改失败")}},M=()=>{if(v.value.length===0){m.warning("请先选择要删除的考卷");return}k(v.value)},U=a=>{k(a)},$=a=>{S.value=a,w()},G=a=>{P.value=a,w()},B=a=>a===1?"已提交":"未提交",b=(a,e)=>{if(!a)return"";let r=[];try{r=JSON.parse(a)}catch(d){return console.error("解析答案失败",d),a}switch(e){case"single":return r.map(i=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return i>0&&i<=p.length?p[i-1]:i.toString()}).join(", ");case"multiple":return r.map(i=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return i.map(s=>s>0&&s<=p.length?p[s-1]:s.toString()).join(" ")}).join(`
`);case"judge":return r.map(i=>i===1?"正确":i===2?"错误":i.toString()).join(`
`);case"fillBlank":return String(r||"").replace(/\[|\]/g,"").split(",").map(i=>i.trim()).filter(Boolean).join(`
`);default:return String(a||"").split(",").map(i=>i.trim()).filter(Boolean).join(`
`)}};return L(()=>{w()}),(a,e)=>{const r=_("el-button"),d=_("el-table-column"),Q=_("el-table"),E=_("el-pagination"),T=_("el-card"),i=_("el-dialog"),p=F("loading");return y(),D("div",W,[t("div",X,[t("div",Y,[o(r,{type:"danger",icon:C(R),onClick:M,disabled:v.value.length===0},{default:u(()=>[g(" 批量删除 ("+n(v.value.length)+") ",1)]),_:1},8,["icon","disabled"])]),t("div",Z,[O((y(),j(Q,{data:N.value,style:{width:"100%"},onSelectionChange:e[0]||(e[0]=s=>v.value=s.map(f=>f.id)),border:"",fit:""},{default:u(()=>[o(d,{type:"selection",width:"55",fixed:"left"}),o(d,{prop:"examinationName",label:"考试名称",fixed:"left","show-overflow-tooltip":""}),o(d,{prop:"userName",label:"考生姓名",width:"80","show-overflow-tooltip":"",align:"center"}),o(d,{prop:"isSubmit",label:"提交状态",width:"80","show-overflow-tooltip":"",align:"center"},{default:u(({row:s})=>[g(n(B(s.isSubmit)),1)]),_:1}),o(d,{prop:"questionQuantity",label:"题目数量",width:"80","show-overflow-tooltip":"",align:"center"}),o(d,{prop:"answeredAlreadyQuantity",label:"已答数量",width:"80","show-overflow-tooltip":"",align:"center"}),o(d,{prop:"score",label:"得分",width:"80","show-overflow-tooltip":"",align:"center"}),o(d,{prop:"updateTime",label:"更新时间","show-overflow-tooltip":"",align:"center"}),o(d,{label:"操作",width:"280",fixed:"right"},{default:u(({row:s})=>[o(r,{type:"primary",size:"small",plain:"",icon:C(H),onClick:f=>q(s.id)},{default:u(()=>[...e[4]||(e[4]=[g("详情",-1)])]),_:1},8,["icon","onClick"]),o(r,{type:s.isSubmit===1?"warning":"success",size:"small",plain:"",onClick:f=>I(s.id,s.isSubmit===1?"0":"1")},{default:u(()=>[g(n(s.isSubmit===1?"设为未提交":"设为已提交"),1)]),_:2},1032,["type","onClick"]),o(r,{type:"danger",size:"small",plain:"",icon:C(R),onClick:f=>U(s.id)},{default:u(()=>[...e[5]||(e[5]=[g("删除",-1)])]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[p,A.value]])]),t("div",ee,[o(E,{"current-page":S.value,"onUpdate:currentPage":e[1]||(e[1]=s=>S.value=s),"page-size":P.value,"onUpdate:pageSize":e[2]||(e[2]=s=>P.value=s),"page-sizes":[10,20,50,100],layout:" prev, pager, next, jumper,->,sizes,total",total:h.value,background:!0,onSizeChange:G,onCurrentChange:$,"prev-text":"上一页","next-text":"下一页","size-text":"条/页"},{total:u(()=>[g(" 共 "+n(h.value)+" 条 ",1)]),_:1},8,["current-page","page-size","total"])])]),o(i,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=s=>x.value=s),title:"考卷详情",width:"70%"},{default:u(()=>[l.value?(y(),j(T,{key:0,class:"detail-card"},{default:u(()=>[t("div",te,[t("div",ae,[e[6]||(e[6]=t("span",{class:"detail-label"},"考卷编号：",-1)),t("span",se,n(l.value.number),1)]),t("div",ne,[e[7]||(e[7]=t("span",{class:"detail-label"},"考试名称：",-1)),t("span",le,n(l.value.examinationInformationName),1)]),t("div",ie,[e[8]||(e[8]=t("span",{class:"detail-label"},"考生姓名：",-1)),t("span",oe,n(l.value.userName),1)]),t("div",re,[e[9]||(e[9]=t("span",{class:"detail-label"},"提交状态：",-1)),t("span",de,n(B(l.value.isSubmit)),1)]),t("div",ue,[e[10]||(e[10]=t("span",{class:"detail-label"},"题目总数：",-1)),t("span",ce,n(l.value.questionQuantity),1)]),t("div",pe,[e[11]||(e[11]=t("span",{class:"detail-label"},"已答数量：",-1)),t("span",me,n(l.value.answeredAlreadyQuantity),1)]),t("div",ve,[e[12]||(e[12]=t("span",{class:"detail-label"},"得分：",-1)),t("span",_e,n(l.value.score),1)]),t("div",ge,[e[13]||(e[13]=t("span",{class:"detail-label"},"更新时间：",-1)),t("span",we,n(l.value.updateTime),1)])]),t("div",be,[e[18]||(e[18]=t("h3",null,"答案详情",-1)),t("div",fe,[e[14]||(e[14]=t("span",{class:"answer-label"},"单选题答案：",-1)),t("pre",ye,n(b(l.value.singleChoiceAnswers,"single")),1)]),t("div",he,[e[15]||(e[15]=t("span",{class:"answer-label"},"多选题答案：",-1)),t("pre",Ae,n(b(l.value.multipleChoiceAnswers,"multiple")),1)]),t("div",Se,[e[16]||(e[16]=t("span",{class:"answer-label"},"判断题答案：",-1)),t("pre",Pe,n(b(l.value.judgeAnswers,"judge")),1)]),t("div",xe,[e[17]||(e[17]=t("span",{class:"answer-label"},"填空题答案：",-1)),t("pre",Ce,n(b(l.value.fillBlankAnswers,"fillBlank")),1)])]),l.value.notes?(y(),D("div",Ne,[e[19]||(e[19]=t("h3",null,"备注",-1)),t("p",ke,n(l.value.notes),1)])):z("",!0),t("div",Be,[e[20]||(e[20]=t("h3",null,"更新信息",-1)),t("p",null,"更新人："+n(l.value.updateName),1),t("p",null,"更新时间："+n(l.value.updateTime),1)])]),_:1})):z("",!0)]),_:1},8,["modelValue"])])}}}),De=K(Qe,[["__scopeId","data-v-2357e56d"]]);export{De as default};
