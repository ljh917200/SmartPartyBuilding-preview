import{h as ae,D as z,r as q,G as ie,c as r,f as c,a as l,w as n,b as i,F as h,B as v,o as a,g as u,k as _,j as C,i as U,t as w,_ as pe}from"./index-G-qDTFo-.js";const de={class:"add-exam-paper-container"},ue={class:"card-header"},re={key:0,class:"paper-question-list"},_e={class:"question-header"},me={class:"question-type"},ye={class:"question-content"},ce={key:0,class:"question-options"},fe={key:1,class:"question-answer"},ge={key:0},ve={key:1},Be={key:2},Qe={key:0},Ce={class:"dialog-footer"},Te=ae({__name:"index",setup(ke){const f=z({name:"",questionCount:0,totalScore:0}),m=z({page:1,pageSize:10,type:""}),S=q([]),D=q(0),y=q([]),b=q(!1),F=q(),s=z({id:"",type:"",question:"",questionOptions:[],answerType:""}),N=t=>{if(s.id=t.id,s.type=t.type,s.question=t.question,s.answerType=t.answerType,(t.type==="1"||t.type==="2")&&t.questionOption){const e=t.questionOption.split(",");s.questionOptions=e.map(p=>({content:p}))}else s.questionOptions=[{content:""}];b.value=!0},P=()=>{var t;(t=F.value)==null||t.resetFields(),s.questionOptions=[{content:""}]},j=()=>{s.questionOptions.push({content:""})},I=t=>{s.questionOptions.length>1?s.questionOptions.splice(t,1):v.warning("至少保留一个选项")},L=async()=>{try{const t={id:s.id,type:s.type,question:s.question};if(s.type==="1"||s.type==="2"?(t.questionOption=s.questionOptions.map(p=>p.content).join(","),t.answerType=s.answerType):(s.type==="3"||s.type==="4")&&(t.answerType=s.answerType),{code:1,msg:"success",data:null}.code===1){v.success("题目更新成功"),b.value=!1;const p=y.value.findIndex(d=>d.id===s.id);p!==-1&&(y.value[p]={...y.value[p],...t}),V()}}catch(t){console.error("更新题目失败:",t),v.error("更新题目失败")}},A=t=>{m.type=t,m.page=1,V()},G=t=>{y.value=y.value.filter(e=>e.id!==t)},H=async t=>{if(t)try{const e={code:1,msg:"success",data:{id:t.id,type:t.type,question:t.question,questionOption:J(t),answerType:K(t),isChoose:1,times:t.times,note:null,updateName:"管理员",updateTime:t.updateTime}};e.code===1&&(y.value.some(d=>d.id===t.id)?v.warning("该题目已添加到考卷中"):y.value.push(e.data))}catch(e){console.error("获取题目详情失败:",e),v.error("获取题目详情失败")}},V=async()=>{try{const t={code:1,msg:"success",data:{total:25,records:[{id:"QB_001",type:"1",question:"中国共产党成立于哪一年？",isChoose:1,times:11,updateTime:"2025-05-25 17:24:54"},{id:"QB_002",type:"1",question:"党的最高理想和最终目标是什么？",isChoose:1,times:9,updateTime:"2025-05-25 17:24:54"},{id:"QB_003",type:"1",question:"中国共产党的宗旨是？",isChoose:1,times:15,updateTime:"2025-05-25 17:24:54"},{id:"QB_004",type:"1",question:"中国特色社会主义最本质的特征是？",isChoose:1,times:12,updateTime:"2025-05-25 17:24:54"},{id:"QB_005",type:"1",question:"党的根本组织原则是？",isChoose:1,times:8,updateTime:"2025-05-25 17:24:54"},{id:"QB_006",type:"2",question:"以下哪些是党员的义务？",isChoose:1,times:9,updateTime:"2025-05-25 17:24:54"},{id:"QB_007",type:"2",question:"党的纪律处分有哪些？",isChoose:1,times:6,updateTime:"2025-05-25 17:24:54"},{id:"QB_008",type:"2",question:"以下哪些属于党的三大作风？",isChoose:1,times:11,updateTime:"2025-05-25 17:24:54"},{id:"QB_009",type:"2",question:"党的四项基本原则是？",isChoose:1,times:14,updateTime:"2025-05-25 17:24:54"},{id:"QB_010",type:"2",question:"以下哪些是党在新时代的强军目标？",isChoose:1,times:7,updateTime:"2025-05-25 17:24:54"},{id:"QB_011",type:"3",question:"预备党员没有表决权、选举权和被选举权。",isChoose:1,times:8,updateTime:"2025-05-25 17:24:54"},{id:"QB_012",type:"3",question:"改革开放是中国的基本国策。",isChoose:1,times:7,updateTime:"2025-05-25 17:24:54"},{id:"QB_013",type:"3",question:"中国共产党是中国工人阶级的先锋队，同时是中国人民和中华民族的先锋队。",isChoose:1,times:13,updateTime:"2025-05-25 17:24:54"},{id:"QB_014",type:"3",question:"党的全国代表大会每五年举行一次。",isChoose:1,times:9,updateTime:"2025-05-25 17:24:54"},{id:"QB_015",type:"3",question:"发展是我们党执政兴国的第一要务。",isChoose:1,times:11,updateTime:"2025-05-25 17:24:54"},{id:"QB_016",type:"4",question:"中国共产党的根本宗旨是______。",isChoose:1,times:10,updateTime:"2025-05-25 17:24:54"},{id:"QB_017",type:"4",question:"党的最高领导机关是______。",isChoose:1,times:5,updateTime:"2025-05-25 17:24:54"},{id:"QB_018",type:"4",question:"入党誓词的最后一句是_______。",isChoose:1,times:8,updateTime:"2025-05-25 17:24:54"},{id:"QB_019",type:"4",question:"发展党员，必须把_______放在首位。",isChoose:1,times:12,updateTime:"2025-05-25 17:24:54"},{id:"QB_020",type:"4",question:"中国共产党成立于_______年。",isChoose:1,times:14,updateTime:"2025-05-25 17:24:54"}]}};t.code===1&&(S.value=t.data.records,D.value=t.data.total)}catch(t){console.error("获取题库列表失败:",t),v.error("获取题库列表失败")}},J=t=>({QB_001:"1.1921年,2.1922年,3.1923年,4.1924年",QB_002:"1.实现社会主义,2.实现共产主义,3.实现共同富裕,4.实现中华民族伟大复兴",QB_003:"1.全心全意为人民服务,2.实现共产主义,3.以人为本,4.为人民谋幸福",QB_004:"1.党的领导,2.人民当家作主,3.依法治国,4.改革开放",QB_005:"1.民主集中制,2.集体领导制,3.个人分工负责制,4.党内选举制",QB_006:"1.认真学习马克思列宁主义,2.贯彻执行党的基本路线,3.坚持党和人民的利益高于一切,4.自觉遵守党的纪律",QB_007:"1.警告,2.严重警告,3.撤销党内职务,4.留党察看,5.开除党籍",QB_008:"1.理论联系实际,2.艰苦奋斗,3.密切联系群众,4.批评与自我批评",QB_009:"1.坚持社会主义道路,2.坚持人民民主专政,3.坚持中国共产党的领导,4.坚持马克思列宁主义毛泽东思想",QB_010:"1.听党指挥,2.能打胜仗,3.作风优良,4.世界一流"})[t.id]||"",K=t=>({QB_001:"1",QB_002:"2",QB_003:"1",QB_004:"1",QB_005:"1",QB_006:"1,3,4",QB_007:"1,2,3,4,5",QB_008:"1,3,4",QB_009:"1,2,3,4",QB_010:"1,2,3,4",QB_011:"1",QB_012:"2",QB_013:"1",QB_014:"1",QB_015:"1",QB_016:"全心全意为人民服务",QB_017:"党的全国代表大会和它所产生的中央委员会",QB_018:"永不叛党",QB_019:"政治标准",QB_020:"1921"})[t.id]||"",W=t=>{m.page=t,V()},X=t=>{m.pageSize=t,V()},Y=()=>{if(!f.name){v.warning("请输入考卷名称");return}if(y.value.length===0){v.warning("请至少添加一道题目到考卷中");return}v.success(`考卷 "${f.name}" 保存成功`)};return ie(()=>{V()}),(t,e)=>{const p=i("el-input"),d=i("el-form-item"),Q=i("el-button"),$=i("el-form"),O=i("el-card"),g=i("el-option"),M=i("el-select"),x=i("el-table-column"),B=i("el-tag"),Z=i("el-table"),ee=i("el-pagination"),R=i("el-col"),te=i("el-empty"),oe=i("el-row"),E=i("el-radio"),le=i("el-radio-group"),ne=i("el-dialog");return a(),r(h,null,[c("div",de,[l(O,{class:"mb-20"},{default:n(()=>[l($,{inline:!0,model:f,class:"demo-form-inline"},{default:n(()=>[l(d,{label:"考卷名称"},{default:n(()=>[l(p,{modelValue:f.name,"onUpdate:modelValue":e[0]||(e[0]=o=>f.name=o),placeholder:"请输入考卷名称"},null,8,["modelValue"])]),_:1}),l(d,{label:"题目数量"},{default:n(()=>[l(p,{modelValue:f.questionCount,"onUpdate:modelValue":e[1]||(e[1]=o=>f.questionCount=o),placeholder:"题目数量",readonly:""},null,8,["modelValue"])]),_:1}),l(d,{label:"总分"},{default:n(()=>[l(p,{modelValue:f.totalScore,"onUpdate:modelValue":e[2]||(e[2]=o=>f.totalScore=o),placeholder:"总分",readonly:""},null,8,["modelValue"])]),_:1}),l(d,null,{default:n(()=>[l(Q,{type:"primary",onClick:Y},{default:n(()=>[...e[13]||(e[13]=[u("保存考卷",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(oe,{gutter:20},{default:n(()=>[l(R,{span:7},{default:n(()=>[l(O,null,{header:n(()=>[c("div",ue,[e[14]||(e[14]=c("span",null,"题库",-1)),l(M,{modelValue:m.type,"onUpdate:modelValue":e[3]||(e[3]=o=>m.type=o),placeholder:"请选择题目类型",size:"small",onChange:e[4]||(e[4]=o=>A(m.type)),style:{width:"150px",height:"36px"}},{default:n(()=>[l(g,{label:"全部题目",value:""}),l(g,{label:"单选题",value:"1"}),l(g,{label:"多选题",value:"2"}),l(g,{label:"判断题",value:"3"}),l(g,{label:"填空题",value:"4"})]),_:1},8,["modelValue"])])]),default:n(()=>[l(Z,{data:S.value,height:"540","highlight-current-row":"",onCurrentChange:H},{default:n(()=>[l(x,{prop:"id",label:"ID",width:"100"}),l(x,{prop:"type",label:"题目类型",width:"100"},{default:n(o=>[o.row.type==="1"?(a(),_(B,{key:0},{default:n(()=>[...e[15]||(e[15]=[u("单选题",-1)])]),_:1})):o.row.type==="2"?(a(),_(B,{key:1,type:"success"},{default:n(()=>[...e[16]||(e[16]=[u("多选题",-1)])]),_:1})):o.row.type==="3"?(a(),_(B,{key:2,type:"warning"},{default:n(()=>[...e[17]||(e[17]=[u("判断题",-1)])]),_:1})):o.row.type==="4"?(a(),_(B,{key:3,type:"info"},{default:n(()=>[...e[18]||(e[18]=[u("填空题",-1)])]),_:1})):C("",!0)]),_:1}),l(x,{prop:"question",label:"题目内容","show-overflow-tooltip":""})]),_:1},8,["data"]),l(ee,{"current-page":m.page,"onUpdate:currentPage":e[5]||(e[5]=o=>m.page=o),"page-size":m.pageSize,"onUpdate:pageSize":e[6]||(e[6]=o=>m.pageSize=o),"page-sizes":[10,20,30,40],background:!0,layout:"prev, pager, next, jumper, ->, total",total:D.value,onCurrentChange:W,onSizeChange:X,class:"mt-20"},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),l(R,{span:17},{default:n(()=>[l(O,null,{header:n(()=>[...e[19]||(e[19]=[c("div",{class:"card-header"},[c("span",null,"考卷模板")],-1)])]),default:n(()=>[y.value.length>0?(a(),r("div",re,[(a(!0),r(h,null,U(y.value,(o,T)=>(a(),r("div",{key:o.id,class:"question-item"},[c("div",_e,[c("span",me,[c("span",null,w(T+1)+". ",1),o.type==="1"?(a(),_(B,{key:0},{default:n(()=>[...e[20]||(e[20]=[u("单选题",-1)])]),_:1})):o.type==="2"?(a(),_(B,{key:1,type:"success"},{default:n(()=>[...e[21]||(e[21]=[u("多选题",-1)])]),_:1})):o.type==="3"?(a(),_(B,{key:2,type:"warning"},{default:n(()=>[...e[22]||(e[22]=[u("判断题",-1)])]),_:1})):o.type==="4"?(a(),_(B,{key:3,type:"info"},{default:n(()=>[...e[23]||(e[23]=[u("填空题",-1)])]),_:1})):C("",!0)]),l(Q,{type:"primary",icon:"Edit",size:"small",circle:"",onClick:k=>N(o)},null,8,["onClick"]),l(Q,{type:"danger",icon:"Delete",size:"small",circle:"",onClick:k=>G(o.id)},null,8,["onClick"])]),c("div",ye,w(o.question),1),o.questionOption?(a(),r("div",ce,[(a(!0),r(h,null,U(o.questionOption.split(","),(k,se)=>(a(),r("div",{key:se,class:"option-item"},w(k),1))),128))])):C("",!0),o.answerType?(a(),r("div",fe,[o.type==="1"||o.type==="2"?(a(),r("div",ge," 答案: "+w(o.answerType),1)):o.type==="3"?(a(),r("div",ve," 答案: "+w(o.answerType==="1"?"正确":"错误"),1)):o.type==="4"?(a(),r("div",Be," 答案: "+w(o.answerType),1)):C("",!0)])):C("",!0)]))),128))])):(a(),_(te,{key:1,description:"请从题库中添加题目到考卷"}))]),_:1})]),_:1})]),_:1})]),l(ne,{modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=o=>b.value=o),title:"编辑题目",width:"600px",onClose:P},{footer:n(()=>[c("span",Ce,[l(Q,{onClick:e[11]||(e[11]=o=>b.value=!1)},{default:n(()=>[...e[27]||(e[27]=[u("取消",-1)])]),_:1}),l(Q,{type:"primary",onClick:L},{default:n(()=>[...e[28]||(e[28]=[u("确定",-1)])]),_:1})])]),default:n(()=>[l($,{model:s,ref_key:"editFormRef",ref:F,"label-width":"80px"},{default:n(()=>[l(d,{label:"题目类型"},{default:n(()=>[l(M,{modelValue:s.type,"onUpdate:modelValue":e[7]||(e[7]=o=>s.type=o),placeholder:"请选择题目类型",disabled:""},{default:n(()=>[l(g,{label:"单选题",value:"1"}),l(g,{label:"多选题",value:"2"}),l(g,{label:"判断题",value:"3"}),l(g,{label:"填空题",value:"4"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"题目内容",prop:"question"},{default:n(()=>[l(p,{modelValue:s.question,"onUpdate:modelValue":e[8]||(e[8]=o=>s.question=o),type:"textarea",rows:3,placeholder:"请输入题目内容"},null,8,["modelValue"])]),_:1}),s.type==="1"||s.type==="2"?(a(),r("div",Qe,[(a(!0),r(h,null,U(s.questionOptions,(o,T)=>(a(),_(d,{key:T,label:`选项${T+1}`},{default:n(()=>[l(p,{modelValue:o.content,"onUpdate:modelValue":k=>o.content=k,placeholder:"请输入选项内容"},{append:n(()=>[T>0?(a(),_(Q,{key:0,icon:"Delete",onClick:k=>I(T)},null,8,["onClick"])):C("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128)),l(d,null,{default:n(()=>[l(Q,{type:"primary",onClick:j},{default:n(()=>[...e[24]||(e[24]=[u("添加选项",-1)])]),_:1})]),_:1})])):s.type==="3"?(a(),_(d,{key:1,label:"答案",prop:"answerType"},{default:n(()=>[l(le,{modelValue:s.answerType,"onUpdate:modelValue":e[9]||(e[9]=o=>s.answerType=o)},{default:n(()=>[l(E,{label:"1"},{default:n(()=>[...e[25]||(e[25]=[u("正确",-1)])]),_:1}),l(E,{label:"2"},{default:n(()=>[...e[26]||(e[26]=[u("错误",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):s.type==="4"?(a(),_(d,{key:2,label:"答案",prop:"answerType"},{default:n(()=>[l(p,{modelValue:s.answerType,"onUpdate:modelValue":e[10]||(e[10]=o=>s.answerType=o),placeholder:"请输入答案"},null,8,["modelValue"])]),_:1})):C("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}}),be=pe(Te,[["__scopeId","data-v-41c1fcb9"]]);export{be as default};
