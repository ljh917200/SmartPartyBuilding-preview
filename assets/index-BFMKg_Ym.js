import{h as Ie,r as p,D as P,Z as ke,G as be,c as C,f as r,s as G,a as l,w as d,p as a,H as X,$ as _,S as Y,M as we,a0 as q,F as ee,i as te,a1 as ae,a2 as H,B as v,o as D,g as s,k as L,j as V,a3 as I,t as o,a4 as Le,a5 as Ve,a6 as xe,a7 as ne,a8 as re,a9 as Ee,z as ze,b as Ue,aa as de,U as le,ab as ie,ac as se,_ as $e}from"./index-BxqgcJHC.js";const Re={class:"department-container"},Fe={class:"header-section"},Se={class:"header-actions"},Pe={key:0,class:"department-grid"},je={class:"card-header"},Me={class:"card-header-left"},Ae={class:"card-actions"},Oe={class:"card-content"},Ge={class:"info-row"},qe={class:"info-value"},He={class:"info-row"},Je={class:"info-value"},Ze={class:"info-row"},Ke={class:"info-value"},Qe={class:"info-row"},We={class:"info-value"},Xe={class:"info-row"},Ye={class:"info-value"},et={key:1,class:"empty-state"},tt={class:"dialog-footer"},at={class:"dialog-footer"},nt={class:"children-dialog-content"},rt={key:1,class:"children-grid"},dt={class:"child-card-header"},lt={class:"child-card-header-left"},it={class:"child-card-actions"},st={class:"child-card-content"},mt={class:"info-row"},ot={class:"info-value"},pt={class:"info-row"},ut={class:"info-value"},ct={class:"info-row"},ft={class:"info-value"},ht={class:"info-row"},_t={class:"info-value"},vt={class:"info-row"},Dt={class:"info-value"},yt={key:2,class:"empty-children"},Nt={key:3,class:"add-child-section"},gt=Ie({__name:"index",setup(Tt){const N=p([]),c=p([]);p([]);const U=p(""),j=p(!1),k=P({currentPage:1,pageSize:10,total:0}),b=p(!1),$=p("新增部门"),x=p(!1),M=p(""),R=p(!1),F=p(!1),me=p(""),T=P({id:"",departmentName:"",fatherDepartmentId:"",hasChildren:!1,isLeaf:!0,createBy:"",createTime:"",updateBy:"",updateTime:"",isDelete:0}),u=P({departmentName:"",fatherDepartmentId:""}),oe=p(),E=P({departmentName:""}),S=p(!1),w=p(!1),pe=ke(()=>y.value.length===0?"部门列表":y.value.map(e=>e.departmentName).join(" -> ")),g=p([]),B=p(null),y=p([]),f=p({}),ue=async()=>{j.value=!0;try{const e=[{id:"dept_company_001",departmentName:"总公司",fatherDepartmentId:"0",hasChildren:!0,isLeaf:!1,createBy:"admin",createTimeBegin:"2024-01-01 09:00:00",createTimeEnd:"2024-01-01 09:00:00",updateBy:"admin",updateTimeBegin:"2024-01-01 09:00:00",updateTimeEnd:"2024-01-01 09:00:00"}].filter(h=>!h.fatherDepartmentId||h.fatherDepartmentId==="0"),i=(k.currentPage-1)*k.pageSize,m=i+k.pageSize,n=e.slice(i,m);N.value=n,k.total=e.length}catch(t){v.error("获取部门列表失败"),console.error("获取部门列表失败:",t)}finally{j.value=!1}},J=(t,e)=>!t&&!e?"-":t===e?t:`${t} ~ ${e}`,ce=()=>{$.value="新增部门",x.value=!1,A(),b.value=!0},Z=t=>{$.value="编辑部门",x.value=!0,E.departmentName="",U.value=t.id,M.value=t.departmentName,u.departmentName=t.departmentName,u.fatherDepartmentId=t.fatherDepartmentId,b.value=!0},fe=async t=>{F.value=!0;try{const e=N.value.find(m=>m.id===t);if(!e){v.error("部门不存在");return}const i={code:0,msg:"",data:{id:t,departmentName:e.departmentName,fatherDepartmentId:e.fatherDepartmentId,hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-01-15 10:30:00",updateBy:"admin",updateTime:"2024-02-20 14:20:00",isDelete:0}};t==="dept_tech_001"?i.data={id:"dept_tech_001",departmentName:"技术研发部",fatherDepartmentId:"0",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-01-15 10:30:00",updateBy:"admin",updateTime:"2024-02-20 14:20:00",isDelete:0}:t==="dept_hr_002"?i.data={id:"dept_hr_002",departmentName:"人力资源部",fatherDepartmentId:"0",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-01-10 09:15:00",updateBy:"admin",updateTime:"2024-03-05 11:45:00",isDelete:0}:t==="dept_frontend_006"&&(i.data={id:"dept_frontend_006",departmentName:"前端开发组",fatherDepartmentId:"技术研发部",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-02-10 13:45:00",updateBy:"admin",updateTime:"2024-03-20 14:20:00",isDelete:0}),Object.assign(T,i.data)}catch(e){v.error("获取部门详情失败"),console.error("获取部门详情失败:",e)}finally{F.value=!1}},K=t=>{me.value=t.departmentName,R.value=!0,fe(t.id)},Q=()=>{if(c.value.length===0){v.warning("请先选择要删除的部门");return}ze.confirm(`确定要删除选中的 ${c.value.length} 个部门吗？`,"批量删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{setTimeout(()=>{N.value=N.value.filter(t=>!c.value.includes(t.id)),g.value=g.value.filter(t=>!c.value.includes(t.id)),B.value&&(f.value[B.value.id]=g.value.filter(t=>!c.value.includes(t.id))),k.total-=c.value.length,c.value=[],v.success("批量删除成功")},500)}catch{v.error("批量删除失败")}}).catch(()=>{})},z=()=>{b.value=!1,R.value=!1,A(),Object.assign(T,{id:"",departmentName:"",fatherDepartmentId:"",createBy:"",createTime:"",updateBy:"",updateTime:"",isDelete:0})},he=async()=>{var t;if(E.departmentName="",!u.departmentName.trim()){E.departmentName="部门名称不能为空",v.warning("请输入部门名称");return}try{if(await new Promise(e=>setTimeout(e,300)),x.value){const e=N.value.find(n=>n.departmentName===M.value);if(e&&e.departmentName===u.departmentName&&e.fatherDepartmentId===u.fatherDepartmentId){v.info("未做任何修改");return}const i={code:null,msg:null,data:null},m=N.value.findIndex(n=>n.id===U.value);m!==-1&&(N.value[m].departmentName=u.departmentName,N.value[m].fatherDepartmentId=u.fatherDepartmentId||"0",v.success("部门更新成功")),_e(U.value,u.departmentName)}else{const e={code:null,msg:null,data:null},i={id:`dept_new_${Date.now()}`,departmentName:u.departmentName,fatherDepartmentId:u.fatherDepartmentId||"0",hasChildren:!1,isLeaf:!0,createBy:"currentUser",createTimeBegin:new Date().toLocaleString("zh-CN"),createTimeEnd:new Date().toLocaleString("zh-CN"),updateBy:"currentUser",updateTimeBegin:new Date().toLocaleString("zh-CN"),updateTimeEnd:new Date().toLocaleString("zh-CN")};if(i.fatherDepartmentId==="0"||!i.fatherDepartmentId)N.value.unshift(i),k.total++;else{const m={...i,fatherDepartmentName:((t=B.value)==null?void 0:t.departmentName)||"",createTime:i.createTimeBegin,updateTime:i.updateTimeBegin,isDelete:0};g.value.push(m),f.value[i.fatherDepartmentId]&&f.value[i.fatherDepartmentId].push(m)}v.success("部门添加成功")}z()}catch(e){v.error(x.value?"部门更新失败":"部门添加失败"),console.error("保存部门失败:",e)}},_e=(t,e)=>{const i=g.value.findIndex(m=>m.id===t);i!==-1&&(g.value[i].departmentName=e),Object.keys(f.value).forEach(m=>{const n=f.value[m].findIndex(h=>h.id===t);n!==-1&&(f.value[m][n].departmentName=e)})},A=()=>{u.departmentName="",u.fatherDepartmentId="",M.value="",U.value="",E.departmentName=""},W=t=>t.hasChildren,ve=async t=>{await De(t);try{await O(t.id),S.value=!0}catch(e){v.error("加载子部门失败"),console.error("加载子部门失败:",e)}},De=async t=>{y.value=[];let e=t;const i=[];for(;e;)i.unshift(e),e.fatherDepartmentId&&e.fatherDepartmentId!=="0"?e=await ye(e.fatherDepartmentId):e=null;y.value=i},ye=async t=>{for(const i in f.value){const m=f.value[i].find(n=>n.id===t);if(m)return m}const e=N.value.find(i=>i.id===t);return e||null},Ne=async t=>{y.value.push(t),B.value=t;try{await O(t.id)}catch(e){v.error("加载子部门失败"),console.error("加载子部门失败:",e)}},ge=()=>{if(y.value.length>1){y.value.pop();const t=y.value[y.value.length-1];B.value=t,f.value[t.id]?g.value=f.value[t.id]:O(t.id)}},O=async t=>{w.value=!0;try{if(f.value[t]&&f.value[t].length>0){g.value=f.value[t];return}const e=Te(t);e.code===1&&e.data&&(f.value[t]=e.data,g.value=e.data)}catch(e){v.error("获取子部门列表失败"),console.error("获取子部门列表失败:",e)}finally{w.value=!1}},Te=t=>{switch(t){case"dept_company_001":return{code:1,msg:"成功",data:[{id:"dept_tech_001",departmentName:"技术部",fatherDepartmentId:"dept_company_001",fatherDepartmentName:"总公司",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-01-15 10:30:00",updateBy:"admin",updateTime:"2024-02-20 14:20:00",isDelete:0},{id:"dept_hr_002",departmentName:"人事部",fatherDepartmentId:"dept_company_001",fatherDepartmentName:"总公司",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-01-10 09:15:00",updateBy:"admin",updateTime:"2024-03-05 11:45:00",isDelete:0},{id:"dept_market_003",departmentName:"市场部",fatherDepartmentId:"dept_company_001",fatherDepartmentName:"总公司",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-01-18 14:20:00",updateBy:"admin",updateTime:"2024-03-12 09:10:00",isDelete:0},{id:"dept_product_004",departmentName:"产品部",fatherDepartmentId:"dept_company_001",fatherDepartmentName:"总公司",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-01-22 16:45:00",updateBy:"admin",updateTime:"2024-02-28 15:30:00",isDelete:0}]};case"dept_tech_001":return{code:1,msg:"成功",data:[{id:"dept_frontend_006",departmentName:"前端组",fatherDepartmentId:"dept_tech_001",fatherDepartmentName:"技术部",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-02-10 13:45:00",updateBy:"admin",updateTime:"2024-03-20 14:20:00",isDelete:0},{id:"dept_backend_007",departmentName:"后端组",fatherDepartmentId:"dept_tech_001",fatherDepartmentName:"技术部",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-02-10 13:50:00",updateBy:"admin",updateTime:"2024-03-20 14:25:00",isDelete:0},{id:"dept_test_008",departmentName:"测试组",fatherDepartmentId:"dept_tech_001",fatherDepartmentName:"技术部",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-02-15 10:20:00",updateBy:"admin",updateTime:"2024-03-25 11:15:00",isDelete:0},{id:"dept_ui_011",departmentName:"UI设计组",fatherDepartmentId:"dept_tech_001",fatherDepartmentName:"技术部",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-02-20 09:10:00",updateBy:"admin",updateTime:"2024-04-01 16:40:00",isDelete:0}]};case"dept_hr_002":return{code:1,msg:"成功",data:[{id:"dept_recruit_009",departmentName:"招聘组",fatherDepartmentId:"dept_hr_002",fatherDepartmentName:"人事部",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-02-20 09:30:00",updateBy:"admin",updateTime:"2024-03-10 15:40:00",isDelete:0},{id:"dept_training_012",departmentName:"培训组",fatherDepartmentId:"dept_hr_002",fatherDepartmentName:"人事部",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-02-25 11:45:00",updateBy:"admin",updateTime:"2024-03-15 14:20:00",isDelete:0},{id:"dept_employee_013",departmentName:"员工关系组",fatherDepartmentId:"dept_hr_002",fatherDepartmentName:"人事部",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-01 10:30:00",updateBy:"admin",updateTime:"2024-03-20 09:15:00",isDelete:0}]};case"dept_market_003":return{code:1,msg:"成功",data:[{id:"dept_online_014",departmentName:"线上运营组",fatherDepartmentId:"dept_market_003",fatherDepartmentName:"市场部",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-02-18 13:20:00",updateBy:"admin",updateTime:"2024-03-22 16:40:00",isDelete:0},{id:"dept_offline_015",departmentName:"线下活动组",fatherDepartmentId:"dept_market_003",fatherDepartmentName:"市场部",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-02-22 14:50:00",updateBy:"admin",updateTime:"2024-03-28 10:30:00",isDelete:0}]};case"dept_product_004":return{code:1,msg:"成功",data:[{id:"dept_strategy_016",departmentName:"产品战略组",fatherDepartmentId:"dept_product_004",fatherDepartmentName:"产品部",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-02-20 15:30:00",updateBy:"admin",updateTime:"2024-03-25 14:20:00",isDelete:0},{id:"dept_requirement_017",departmentName:"需求分析组",fatherDepartmentId:"dept_product_004",fatherDepartmentName:"产品部",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-02-25 10:45:00",updateBy:"admin",updateTime:"2024-03-30 11:15:00",isDelete:0}]};case"dept_frontend_006":return{code:1,msg:"成功",data:[{id:"dept_vue_010",departmentName:"Vue小组",fatherDepartmentId:"dept_frontend_006",fatherDepartmentName:"前端组",hasChildren:!0,isLeaf:!1,createBy:"admin",createTime:"2024-03-05 14:20:00",updateBy:"admin",updateTime:"2024-04-15 10:30:00",isDelete:0},{id:"dept_react_018",departmentName:"React小组",fatherDepartmentId:"dept_frontend_006",fatherDepartmentName:"前端组",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-08 11:30:00",updateBy:"admin",updateTime:"2024-04-18 14:50:00",isDelete:0},{id:"dept_mobile_019",departmentName:"移动端小组",fatherDepartmentId:"dept_frontend_006",fatherDepartmentName:"前端组",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-12 09:15:00",updateBy:"admin",updateTime:"2024-04-20 13:40:00",isDelete:0}]};case"dept_backend_007":return{code:1,msg:"成功",data:[{id:"dept_java_020",departmentName:"Java小组",fatherDepartmentId:"dept_backend_007",fatherDepartmentName:"后端组",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-06 10:45:00",updateBy:"admin",updateTime:"2024-04-16 15:20:00",isDelete:0},{id:"dept_go_021",departmentName:"Go小组",fatherDepartmentId:"dept_backend_007",fatherDepartmentName:"后端组",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-10 14:20:00",updateBy:"admin",updateTime:"2024-04-19 11:30:00",isDelete:0}]};case"dept_vue_010":return{code:1,msg:"成功",data:[{id:"dept_vue_admin_022",departmentName:"后台管理系统开发小组",fatherDepartmentId:"dept_vue_010",fatherDepartmentName:"Vue小组",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-20 14:30:00",updateBy:"admin",updateTime:"2024-04-25 10:15:00",isDelete:0},{id:"dept_vue_web_023",departmentName:"网站前端开发小组",fatherDepartmentId:"dept_vue_010",fatherDepartmentName:"Vue小组",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-22 11:45:00",updateBy:"admin",updateTime:"2024-04-28 16:40:00",isDelete:0}]};case"dept_recruit_009":return{code:1,msg:"成功",data:[{id:"dept_tech_recruit_024",departmentName:"技术招聘小组",fatherDepartmentId:"dept_recruit_009",fatherDepartmentName:"招聘组",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-15 10:30:00",updateBy:"admin",updateTime:"2024-04-10 14:20:00",isDelete:0},{id:"dept_nontech_recruit_025",departmentName:"非技术招聘小组",fatherDepartmentId:"dept_recruit_009",fatherDepartmentName:"招聘组",hasChildren:!1,isLeaf:!0,createBy:"admin",createTime:"2024-03-18 13:45:00",updateBy:"admin",updateTime:"2024-04-12 11:15:00",isDelete:0}]};default:return{code:1,msg:"成功",data:[]}}},Be=()=>{S.value=!1,g.value=[],y.value=[],B.value=null},Ce=()=>{B.value&&($.value=`新增${B.value.departmentName}的子部门`,x.value=!1,A(),u.fatherDepartmentId=B.value.id,b.value=!0)};return be(()=>{ue()}),(t,e)=>{const i=Ue("el-checkbox"),m=we("loading");return D(),C("div",Re,[r("div",Fe,[e[9]||(e[9]=r("h1",{class:"page-title"},"部门管理",-1)),r("div",Se,[l(a(_),{type:"primary",icon:a(X),onClick:ce},{default:d(()=>[...e[7]||(e[7]=[s("新增部门",-1)])]),_:1},8,["icon"]),l(a(_),{type:"danger",icon:a(Y),onClick:Q,disabled:c.value.length===0},{default:d(()=>[...e[8]||(e[8]=[s("批量删除",-1)])]),_:1},8,["icon","disabled"])])]),G(l(a(q),{fullscreen:!0,text:"正在加载部门信息..."},null,512),[[m,j.value]]),N.value.length>0?(D(),C("div",Pe,[(D(!0),C(ee,null,te(N.value,n=>(D(),L(a(se),{key:n.id,class:"department-card"},{header:d(()=>[r("div",je,[r("div",Me,[l(i,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=h=>c.value=h),label:n.id,class:"dept-checkbox"},{default:d(()=>[s(o(n.departmentName),1)]),_:2},1032,["modelValue","label"])]),r("div",Ae,[W(n)?(D(),L(a(_),{key:0,type:"info",size:"small",plain:"",icon:a(de),onClick:h=>ve(n)},{default:d(()=>[...e[10]||(e[10]=[s(" 查看子部门 ",-1)])]),_:1},8,["icon","onClick"])):V("",!0),l(a(_),{type:"success",size:"small",plain:"",icon:a(le),onClick:h=>K(n)},{default:d(()=>[...e[11]||(e[11]=[s("详情",-1)])]),_:1},8,["icon","onClick"]),l(a(_),{type:"primary",size:"small",plain:"",icon:a(ie),onClick:h=>Z(n)},{default:d(()=>[...e[12]||(e[12]=[s("编辑",-1)])]),_:1},8,["icon","onClick"])])])]),default:d(()=>[r("div",Oe,[r("div",Ge,[e[13]||(e[13]=r("span",{class:"info-label"},"上级部门ID：",-1)),r("span",qe,o(n.fatherDepartmentId||"无"),1)]),r("div",He,[e[14]||(e[14]=r("span",{class:"info-label"},"创建人：",-1)),r("span",Je,o(n.createBy||"-"),1)]),r("div",Ze,[e[15]||(e[15]=r("span",{class:"info-label"},"创建时间：",-1)),r("span",Ke,o(J(n.createTimeBegin,n.createTimeEnd)),1)]),r("div",Qe,[e[16]||(e[16]=r("span",{class:"info-label"},"更新人：",-1)),r("span",We,o(n.updateBy||"-"),1)]),r("div",Xe,[e[17]||(e[17]=r("span",{class:"info-label"},"更新时间：",-1)),r("span",Ye,o(J(n.updateTimeBegin,n.updateTimeEnd)),1)])])]),_:2},1024))),128))])):(D(),C("div",et,[l(a(ae),{description:"暂无部门数据"})])),l(a(H),{modelValue:R.value,"onUpdate:modelValue":e[1]||(e[1]=n=>R.value=n),title:"部门详情",width:"600px",onClose:z},{footer:d(()=>[r("span",tt,[l(a(_),{onClick:z},{default:d(()=>[...e[18]||(e[18]=[s("关闭",-1)])]),_:1})])]),default:d(()=>[G(l(a(q),{text:"正在加载部门详情..."},null,512),[[m,F.value]]),F.value?V("",!0):(D(),L(a(Ve),{key:0,border:"",column:1},{default:d(()=>[l(a(I),{label:"部门ID"},{default:d(()=>[s(o(T.id),1)]),_:1}),l(a(I),{label:"部门名称"},{default:d(()=>[s(o(T.departmentName),1)]),_:1}),l(a(I),{label:"上级部门ID"},{default:d(()=>[s(o(T.fatherDepartmentId||"无"),1)]),_:1}),l(a(I),{label:"创建人"},{default:d(()=>[s(o(T.createBy||"-"),1)]),_:1}),l(a(I),{label:"创建时间"},{default:d(()=>[s(o(T.createTime||"-"),1)]),_:1}),l(a(I),{label:"更新人"},{default:d(()=>[s(o(T.updateBy||"-"),1)]),_:1}),l(a(I),{label:"更新时间"},{default:d(()=>[s(o(T.updateTime||"-"),1)]),_:1}),l(a(I),{label:"是否删除"},{default:d(()=>[l(a(Le),{type:T.isDelete===0?"success":"danger"},{default:d(()=>[s(o(T.isDelete===0?"正常":"已删除"),1)]),_:1},8,["type"])]),_:1})]),_:1}))]),_:1},8,["modelValue"]),l(a(H),{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=n=>b.value=n),title:$.value,width:"500px",onClose:z},{footer:d(()=>[r("span",at,[l(a(_),{onClick:z},{default:d(()=>[...e[19]||(e[19]=[s("取消",-1)])]),_:1}),l(a(_),{type:"primary",onClick:he},{default:d(()=>[...e[20]||(e[20]=[s("确定",-1)])]),_:1})])]),default:d(()=>[l(a(xe),{model:u,"label-width":"120px",ref_key:"deptFormRef",ref:oe},{default:d(()=>[l(a(ne),{label:"部门名称",prop:"departmentName",error:E.departmentName},{default:d(()=>[l(a(re),{modelValue:u.departmentName,"onUpdate:modelValue":e[2]||(e[2]=n=>u.departmentName=n),placeholder:"请输入部门名称",maxlength:"20","show-word-limit":""},null,8,["modelValue"])]),_:1},8,["error"]),l(a(ne),{label:"上级部门ID",prop:"fatherDepartmentId"},{default:d(()=>[l(a(re),{modelValue:u.fatherDepartmentId,"onUpdate:modelValue":e[3]||(e[3]=n=>u.fatherDepartmentId=n),placeholder:"请输入上级部门ID，顶级部门填0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(a(H),{modelValue:S.value,"onUpdate:modelValue":e[6]||(e[6]=n=>S.value=n),title:pe.value,width:"800px",onClose:Be},{default:d(()=>[r("div",nt,[y.value.length>1?(D(),L(a(_),{key:0,type:"text",icon:a(Ee),onClick:ge,class:"back-button"},{default:d(()=>[s(" 返回上级: "+o(y.value[y.value.length-2].departmentName),1)]),_:1},8,["icon"])):V("",!0),G(l(a(q),{text:"正在加载子部门..."},null,512),[[m,w.value]]),g.value.length>0&&!w.value?(D(),C("div",rt,[(D(!0),C(ee,null,te(g.value,n=>(D(),L(a(se),{key:n.id,class:"child-dept-card"},{header:d(()=>[r("div",dt,[r("div",lt,[l(i,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=h=>c.value=h),label:n.id,class:"dept-checkbox"},{default:d(()=>[s(o(n.departmentName),1)]),_:2},1032,["modelValue","label"])]),r("div",it,[W(n)?(D(),L(a(_),{key:0,type:"info",size:"small",plain:"",icon:a(de),onClick:h=>Ne(n)},{default:d(()=>[...e[21]||(e[21]=[s(" 查看子部门 ",-1)])]),_:1},8,["icon","onClick"])):V("",!0),l(a(_),{type:"success",size:"small",plain:"",icon:a(le),onClick:h=>K(n)},{default:d(()=>[...e[22]||(e[22]=[s("详情",-1)])]),_:1},8,["icon","onClick"]),l(a(_),{type:"primary",size:"small",plain:"",icon:a(ie),onClick:h=>Z(n)},{default:d(()=>[...e[23]||(e[23]=[s("编辑",-1)])]),_:1},8,["icon","onClick"])])])]),default:d(()=>[r("div",st,[r("div",mt,[e[24]||(e[24]=r("span",{class:"info-label"},"部门ID：",-1)),r("span",ot,o(n.id),1)]),r("div",pt,[e[25]||(e[25]=r("span",{class:"info-label"},"上级部门：",-1)),r("span",ut,o(n.fatherDepartmentName||"-"),1)]),r("div",ct,[e[26]||(e[26]=r("span",{class:"info-label"},"创建人：",-1)),r("span",ft,o(n.createBy||"-"),1)]),r("div",ht,[e[27]||(e[27]=r("span",{class:"info-label"},"创建时间：",-1)),r("span",_t,o(n.createTime||"-"),1)]),r("div",vt,[e[28]||(e[28]=r("span",{class:"info-label"},"更新时间：",-1)),r("span",Dt,o(n.updateTime||"-"),1)])])]),_:2},1024))),128))])):w.value?V("",!0):(D(),C("div",yt,[l(a(ae),{description:"暂无子部门数据"})])),w.value?V("",!0):(D(),C("div",Nt,[l(a(_),{type:"danger",icon:a(Y),onClick:Q,disabled:c.value.length===0},{default:d(()=>[s(" 批量删除 ("+o(c.value.length)+") ",1)]),_:1},8,["icon","disabled"]),l(a(_),{type:"primary",icon:a(X),onClick:Ce},{default:d(()=>[...e[29]||(e[29]=[s(" 新增子部门 ",-1)])]),_:1},8,["icon"])]))])]),_:1},8,["modelValue","title"])])}}}),Ct=$e(gt,[["__scopeId","data-v-fffdd530"]]);export{Ct as default};
